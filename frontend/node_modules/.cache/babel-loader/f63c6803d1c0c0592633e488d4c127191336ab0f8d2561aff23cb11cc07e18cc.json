{"ast":null,"code":"import{token,groupId,baseUrl}from\"../utils/constants\";class Api{constructor(_ref){let{address,groupId,token}=_ref;this._address=address;this._groupId=groupId;this._token=token;}_getHeaders(){return{Authorization:this._token,\"Content-Type\":\"application/json\"};}_checkResponse(res){if(res.ok){return res.json();}return Promise.reject(`Error: ${res.status}`);}getUserInfo(){return fetch(`${this._address}${this._groupId}/users/me`,{method:\"GET\",headers:this._getHeaders()}).then(res=>{return this._checkResponse(res);});}getInitialCards(){return fetch(`${this._address}${this._groupId}/cards`,{method:\"GET\",headers:this._getHeaders()}).then(res=>{return this._checkResponse(res);});}editProfile(userData){return fetch(`${this._address}${this._groupId}/users/me`,{method:\"PATCH\",headers:this._getHeaders(),body:JSON.stringify({name:userData.nameUser,about:userData.about})}).then(this._checkResponse);}addNewCard(cardData){return fetch(`${this._address}${this._groupId}/cards`,{method:\"POST\",headers:this._getHeaders(),body:JSON.stringify({name:cardData.name,link:cardData.link})}).then(this._checkResponse);}async deleteCard(cardId){return fetch(`${this._address}${this._groupId}/cards/${cardId}`,{method:\"DELETE\",headers:this._getHeaders()}).then(this._checkResponse);}changeLikeCardStatus(cardId,isLiked){return fetch(`${this._address}${this._groupId}/cards/likes/${cardId}`,{method:isLiked?\"PUT\":\"DELETE\",headers:this._getHeaders()}).then(this._checkResponse);}updateAvatar(userData){return fetch(`${this._address}${this._groupId}/users/me/avatar/`,{method:\"PATCH\",headers:this._getHeaders(),body:JSON.stringify({avatar:userData})}).then(this._checkResponse);}}const api=new Api({address:baseUrl,groupId:groupId,token:token});export default api;","map":{"version":3,"names":["token","groupId","baseUrl","Api","constructor","_ref","address","_address","_groupId","_token","_getHeaders","Authorization","_checkResponse","res","ok","json","Promise","reject","status","getUserInfo","fetch","method","headers","then","getInitialCards","editProfile","userData","body","JSON","stringify","name","nameUser","about","addNewCard","cardData","link","deleteCard","cardId","changeLikeCardStatus","isLiked","updateAvatar","avatar","api"],"sources":["C:/Users/eduar/Documents/Tripleten/web_project_api_full/frontend/src/utils/api.js"],"sourcesContent":["import { token, groupId, baseUrl } from \"../utils/constants\";\r\n\r\nclass Api {\r\n  constructor({ address, groupId, token }) {\r\n    this._address = address;\r\n    this._groupId = groupId;\r\n    this._token = token;\r\n  }\r\n\r\n  _getHeaders() {\r\n    return {\r\n      Authorization: this._token,\r\n      \"Content-Type\": \"application/json\",\r\n    };\r\n  }\r\n\r\n  _checkResponse(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(`Error: ${res.status}`);\r\n  }\r\n\r\n  getUserInfo() {\r\n    return fetch(`${this._address}${this._groupId}/users/me`, {\r\n      method: \"GET\",\r\n      headers: this._getHeaders(),\r\n    }).then((res) => {\r\n      return this._checkResponse(res);\r\n    });\r\n  }\r\n\r\n  getInitialCards() {\r\n    return fetch(`${this._address}${this._groupId}/cards`, {\r\n      method: \"GET\",\r\n      headers: this._getHeaders(),\r\n    }).then((res) => {\r\n      return this._checkResponse(res);\r\n    });\r\n  }\r\n\r\n  editProfile(userData) {\r\n    return fetch(`${this._address}${this._groupId}/users/me`, {\r\n      method: \"PATCH\",\r\n      headers: this._getHeaders(),\r\n      body: JSON.stringify({\r\n        name: userData.nameUser,\r\n        about: userData.about,\r\n      }),\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  addNewCard(cardData) {\r\n    return fetch(`${this._address}${this._groupId}/cards`, {\r\n      method: \"POST\",\r\n      headers: this._getHeaders(),\r\n      body: JSON.stringify({\r\n        name: cardData.name,\r\n        link: cardData.link,\r\n      }),\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  async deleteCard(cardId) {\r\n    return fetch(`${this._address}${this._groupId}/cards/${cardId}`, {\r\n      method: \"DELETE\",\r\n      headers: this._getHeaders(),\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  changeLikeCardStatus(cardId, isLiked) {\r\n    return fetch(`${this._address}${this._groupId}/cards/likes/${cardId}`, {\r\n      method: isLiked ? \"PUT\" : \"DELETE\",\r\n      headers: this._getHeaders(),\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  updateAvatar(userData) {\r\n    return fetch(`${this._address}${this._groupId}/users/me/avatar/`, {\r\n      method: \"PATCH\",\r\n      headers: this._getHeaders(),\r\n      body: JSON.stringify({ avatar: userData }),\r\n    }).then(this._checkResponse);\r\n  }\r\n}\r\n\r\nconst api = new Api({\r\n  address: baseUrl,\r\n  groupId: groupId,\r\n  token: token,\r\n});\r\n\r\nexport default api;\r\n"],"mappings":"AAAA,OAASA,KAAK,CAAEC,OAAO,CAAEC,OAAO,KAAQ,oBAAoB,CAE5D,KAAM,CAAAC,GAAI,CACRC,WAAWA,CAAAC,IAAA,CAA8B,IAA7B,CAAEC,OAAO,CAAEL,OAAO,CAAED,KAAM,CAAC,CAAAK,IAAA,CACrC,IAAI,CAACE,QAAQ,CAAGD,OAAO,CACvB,IAAI,CAACE,QAAQ,CAAGP,OAAO,CACvB,IAAI,CAACQ,MAAM,CAAGT,KAAK,CACrB,CAEAU,WAAWA,CAAA,CAAG,CACZ,MAAO,CACLC,aAAa,CAAE,IAAI,CAACF,MAAM,CAC1B,cAAc,CAAE,kBAClB,CAAC,CACH,CAEAG,cAAcA,CAACC,GAAG,CAAE,CAClB,GAAIA,GAAG,CAACC,EAAE,CAAE,CACV,MAAO,CAAAD,GAAG,CAACE,IAAI,CAAC,CAAC,CACnB,CACA,MAAO,CAAAC,OAAO,CAACC,MAAM,CAAC,UAAUJ,GAAG,CAACK,MAAM,EAAE,CAAC,CAC/C,CAEAC,WAAWA,CAAA,CAAG,CACZ,MAAO,CAAAC,KAAK,CAAC,GAAG,IAAI,CAACb,QAAQ,GAAG,IAAI,CAACC,QAAQ,WAAW,CAAE,CACxDa,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,IAAI,CAACZ,WAAW,CAAC,CAC5B,CAAC,CAAC,CAACa,IAAI,CAAEV,GAAG,EAAK,CACf,MAAO,KAAI,CAACD,cAAc,CAACC,GAAG,CAAC,CACjC,CAAC,CAAC,CACJ,CAEAW,eAAeA,CAAA,CAAG,CAChB,MAAO,CAAAJ,KAAK,CAAC,GAAG,IAAI,CAACb,QAAQ,GAAG,IAAI,CAACC,QAAQ,QAAQ,CAAE,CACrDa,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,IAAI,CAACZ,WAAW,CAAC,CAC5B,CAAC,CAAC,CAACa,IAAI,CAAEV,GAAG,EAAK,CACf,MAAO,KAAI,CAACD,cAAc,CAACC,GAAG,CAAC,CACjC,CAAC,CAAC,CACJ,CAEAY,WAAWA,CAACC,QAAQ,CAAE,CACpB,MAAO,CAAAN,KAAK,CAAC,GAAG,IAAI,CAACb,QAAQ,GAAG,IAAI,CAACC,QAAQ,WAAW,CAAE,CACxDa,MAAM,CAAE,OAAO,CACfC,OAAO,CAAE,IAAI,CAACZ,WAAW,CAAC,CAAC,CAC3BiB,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACnBC,IAAI,CAAEJ,QAAQ,CAACK,QAAQ,CACvBC,KAAK,CAAEN,QAAQ,CAACM,KAClB,CAAC,CACH,CAAC,CAAC,CAACT,IAAI,CAAC,IAAI,CAACX,cAAc,CAAC,CAC9B,CAEAqB,UAAUA,CAACC,QAAQ,CAAE,CACnB,MAAO,CAAAd,KAAK,CAAC,GAAG,IAAI,CAACb,QAAQ,GAAG,IAAI,CAACC,QAAQ,QAAQ,CAAE,CACrDa,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,IAAI,CAACZ,WAAW,CAAC,CAAC,CAC3BiB,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACnBC,IAAI,CAAEI,QAAQ,CAACJ,IAAI,CACnBK,IAAI,CAAED,QAAQ,CAACC,IACjB,CAAC,CACH,CAAC,CAAC,CAACZ,IAAI,CAAC,IAAI,CAACX,cAAc,CAAC,CAC9B,CAEA,KAAM,CAAAwB,UAAUA,CAACC,MAAM,CAAE,CACvB,MAAO,CAAAjB,KAAK,CAAC,GAAG,IAAI,CAACb,QAAQ,GAAG,IAAI,CAACC,QAAQ,UAAU6B,MAAM,EAAE,CAAE,CAC/DhB,MAAM,CAAE,QAAQ,CAChBC,OAAO,CAAE,IAAI,CAACZ,WAAW,CAAC,CAC5B,CAAC,CAAC,CAACa,IAAI,CAAC,IAAI,CAACX,cAAc,CAAC,CAC9B,CAEA0B,oBAAoBA,CAACD,MAAM,CAAEE,OAAO,CAAE,CACpC,MAAO,CAAAnB,KAAK,CAAC,GAAG,IAAI,CAACb,QAAQ,GAAG,IAAI,CAACC,QAAQ,gBAAgB6B,MAAM,EAAE,CAAE,CACrEhB,MAAM,CAAEkB,OAAO,CAAG,KAAK,CAAG,QAAQ,CAClCjB,OAAO,CAAE,IAAI,CAACZ,WAAW,CAAC,CAC5B,CAAC,CAAC,CAACa,IAAI,CAAC,IAAI,CAACX,cAAc,CAAC,CAC9B,CAEA4B,YAAYA,CAACd,QAAQ,CAAE,CACrB,MAAO,CAAAN,KAAK,CAAC,GAAG,IAAI,CAACb,QAAQ,GAAG,IAAI,CAACC,QAAQ,mBAAmB,CAAE,CAChEa,MAAM,CAAE,OAAO,CACfC,OAAO,CAAE,IAAI,CAACZ,WAAW,CAAC,CAAC,CAC3BiB,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEY,MAAM,CAAEf,QAAS,CAAC,CAC3C,CAAC,CAAC,CAACH,IAAI,CAAC,IAAI,CAACX,cAAc,CAAC,CAC9B,CACF,CAEA,KAAM,CAAA8B,GAAG,CAAG,GAAI,CAAAvC,GAAG,CAAC,CAClBG,OAAO,CAAEJ,OAAO,CAChBD,OAAO,CAAEA,OAAO,CAChBD,KAAK,CAAEA,KACT,CAAC,CAAC,CAEF,cAAe,CAAA0C,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}