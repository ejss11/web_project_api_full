{"ast":null,"code":"import React,{useRef,useState,useEffect}from\"react\";import PopupWithForm from\"./PopupWithForm\";import\"../blocks/popup.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function EditAvatarPopup(_ref){let{isOpen,onClose,onUpdateAvatar,isLoading}=_ref;const avatarRef=useRef();const[isLinkValid,setIsLinkValid]=useState(true);const[isFormValid,setIsFormValid]=useState(false);useEffect(()=>{if(isOpen){setIsLinkValid(true);setIsFormValid(false);}},[isOpen]);useEffect(()=>{setIsFormValid(isLinkValid);},[isLinkValid]);function handleLinkAvatar(e){setIsLinkValid(e.target.validity.valid);}function handleSubmit(e){e.preventDefault();onUpdateAvatar({avatar:avatarRef.current.value});}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(PopupWithForm,{name:\"profile-image\",title:\"Cambiar foto de perfil\",isOpen:isOpen,onClose:onClose,onUpdateAvatar:handleSubmit,isLoading:isLoading,children:[/*#__PURE__*/_jsx(\"input\",{type:\"url\",name:\"url\",className:`form__input ${!isLinkValid&&\"form__input_has_error\"}`,placeholder:\"Enlace de la imagen de perfil\",ref:avatarRef,onChange:handleLinkAvatar,minLength:\"2\",required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"form__input-error form__input-error_type_url\",children:!isLinkValid&&\"Introduce una URL válida\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"form__submit\",disabled:!isFormValid,children:isLoading?\"Guardando...\":\"Guardar\"})]})});}export default EditAvatarPopup;","map":{"version":3,"names":["React","useRef","useState","useEffect","PopupWithForm","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","EditAvatarPopup","_ref","isOpen","onClose","onUpdateAvatar","isLoading","avatarRef","isLinkValid","setIsLinkValid","isFormValid","setIsFormValid","handleLinkAvatar","e","target","validity","valid","handleSubmit","preventDefault","avatar","current","value","children","name","title","type","className","placeholder","ref","onChange","minLength","required","disabled"],"sources":["C:/Users/eduar/Documents/Tripleten/web_project_api_full/frontend/src/components/EditAvatarPopup.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport \"../blocks/popup.css\";\r\n\r\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar, isLoading }) {\r\n  const avatarRef = useRef();\r\n  const [isLinkValid, setIsLinkValid] = useState(true);\r\n  const [isFormValid, setIsFormValid] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      setIsLinkValid(true);\r\n      setIsFormValid(false);\r\n    }\r\n  }, [isOpen]);\r\n\r\n  useEffect(() => {\r\n    setIsFormValid(isLinkValid);\r\n  }, [isLinkValid]);\r\n\r\n  function handleLinkAvatar(e) {\r\n    setIsLinkValid(e.target.validity.valid);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    onUpdateAvatar({\r\n      avatar: avatarRef.current.value,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <PopupWithForm\r\n        name=\"profile-image\"\r\n        title=\"Cambiar foto de perfil\"\r\n        isOpen={isOpen}\r\n        onClose={onClose}\r\n        onUpdateAvatar={handleSubmit}\r\n        isLoading={isLoading}\r\n      >\r\n        <input\r\n          type=\"url\"\r\n          name=\"url\"\r\n          className={`form__input ${!isLinkValid && \"form__input_has_error\"}`}\r\n          placeholder=\"Enlace de la imagen de perfil\"\r\n          ref={avatarRef}\r\n          onChange={handleLinkAvatar}\r\n          minLength=\"2\"\r\n          required\r\n        />\r\n        <span className=\"form__input-error form__input-error_type_url\">\r\n          {!isLinkValid && \"Introduce una URL válida\"}\r\n        </span>\r\n        <br />\r\n        <button type=\"submit\" className=\"form__submit\" disabled={!isFormValid}>\r\n          {isLoading ? \"Guardando...\" : \"Guardar\"}\r\n        </button>\r\n      </PopupWithForm>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,MAAM,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC1D,MAAO,CAAAC,aAAa,KAAM,iBAAiB,CAC3C,MAAO,qBAAqB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAE7B,QAAS,CAAAC,eAAeA,CAAAC,IAAA,CAAiD,IAAhD,CAAEC,MAAM,CAAEC,OAAO,CAAEC,cAAc,CAAEC,SAAU,CAAC,CAAAJ,IAAA,CACrE,KAAM,CAAAK,SAAS,CAAGhB,MAAM,CAAC,CAAC,CAC1B,KAAM,CAACiB,WAAW,CAAEC,cAAc,CAAC,CAAGjB,QAAQ,CAAC,IAAI,CAAC,CACpD,KAAM,CAACkB,WAAW,CAAEC,cAAc,CAAC,CAAGnB,QAAQ,CAAC,KAAK,CAAC,CAErDC,SAAS,CAAC,IAAM,CACd,GAAIU,MAAM,CAAE,CACVM,cAAc,CAAC,IAAI,CAAC,CACpBE,cAAc,CAAC,KAAK,CAAC,CACvB,CACF,CAAC,CAAE,CAACR,MAAM,CAAC,CAAC,CAEZV,SAAS,CAAC,IAAM,CACdkB,cAAc,CAACH,WAAW,CAAC,CAC7B,CAAC,CAAE,CAACA,WAAW,CAAC,CAAC,CAEjB,QAAS,CAAAI,gBAAgBA,CAACC,CAAC,CAAE,CAC3BJ,cAAc,CAACI,CAAC,CAACC,MAAM,CAACC,QAAQ,CAACC,KAAK,CAAC,CACzC,CAEA,QAAS,CAAAC,YAAYA,CAACJ,CAAC,CAAE,CACvBA,CAAC,CAACK,cAAc,CAAC,CAAC,CAElBb,cAAc,CAAC,CACbc,MAAM,CAAEZ,SAAS,CAACa,OAAO,CAACC,KAC5B,CAAC,CAAC,CACJ,CAEA,mBACEzB,IAAA,CAAAI,SAAA,EAAAsB,QAAA,cACExB,KAAA,CAACJ,aAAa,EACZ6B,IAAI,CAAC,eAAe,CACpBC,KAAK,CAAC,wBAAwB,CAC9BrB,MAAM,CAAEA,MAAO,CACfC,OAAO,CAAEA,OAAQ,CACjBC,cAAc,CAAEY,YAAa,CAC7BX,SAAS,CAAEA,SAAU,CAAAgB,QAAA,eAErB1B,IAAA,UACE6B,IAAI,CAAC,KAAK,CACVF,IAAI,CAAC,KAAK,CACVG,SAAS,CAAE,eAAe,CAAClB,WAAW,EAAI,uBAAuB,EAAG,CACpEmB,WAAW,CAAC,+BAA+B,CAC3CC,GAAG,CAAErB,SAAU,CACfsB,QAAQ,CAAEjB,gBAAiB,CAC3BkB,SAAS,CAAC,GAAG,CACbC,QAAQ,MACT,CAAC,cACFnC,IAAA,SAAM8B,SAAS,CAAC,8CAA8C,CAAAJ,QAAA,CAC3D,CAACd,WAAW,EAAI,0BAA0B,CACvC,CAAC,cACPZ,IAAA,QAAK,CAAC,cACNA,IAAA,WAAQ6B,IAAI,CAAC,QAAQ,CAACC,SAAS,CAAC,cAAc,CAACM,QAAQ,CAAE,CAACtB,WAAY,CAAAY,QAAA,CACnEhB,SAAS,CAAG,cAAc,CAAG,SAAS,CACjC,CAAC,EACI,CAAC,CAChB,CAAC,CAEP,CAEA,cAAe,CAAAL,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}